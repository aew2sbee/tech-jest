#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# プッシュされるコミットで変更されたファイルのリストを取得
CHANGED_FILES=$(git diff --name-only @{u}..HEAD)

# 変更されたファイルに src/ または tests/ 内のものが含まれているかチェック
if echo "$CHANGED_FILES" | grep -q -E "^(src|tests)/"; then
  echo "src/ または tests/ のファイルが変更されたため、テストを実行します。"
  npm test
else
  echo "src/ または tests/ ディレクトリに変更がないため、テストをスキップします。"
fi